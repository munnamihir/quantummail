<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QuantumMail • Secure Message</title>

  <!-- DEPLOY MARKER: 2026-02-02 decrypt-v3 -->

  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --text:#111827; --muted:#6b7280;
      --border:#e5e7eb; --accent:#2563eb; --bad:#b00020; --good:#0a7a2f;
      --shadow: 0 10px 30px rgba(17,24,39,.08);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    *{box-sizing:border-box}
    body{ margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; background: var(--bg); color: var(--text); }
    .wrap{ max-width: 1100px; margin: 0 auto; padding: 26px 18px; }
    .top{ display:flex; justify-content:space-between; align-items:flex-start; gap:12px; margin-bottom: 14px; }
    .brand .name{ font-weight: 900; letter-spacing:.2px; font-size: 18px; }
    .brand .sub{ color: var(--muted); font-size: 13px; margin-top: 4px; }
    .badge{ font-size: 12px; border: 1px solid var(--border); background: #fff; padding: 6px 10px; border-radius: 999px; color: var(--muted); display:flex; gap:8px; align-items:center; }
    .badge code{ font-family: var(--mono); color:#111; background:#f3f4f6; padding:2px 6px; border-radius: 8px; }
    .grid{ display:grid; grid-template-columns: 380px 1fr; gap: 14px; }
    @media (max-width: 920px){ .grid{ grid-template-columns: 1fr; } }
    .card{ background: var(--card); border: 1px solid var(--border); border-radius: 18px; padding: 14px; box-shadow: var(--shadow); }
    label{ display:block; font-size: 12px; color: var(--muted); margin: 10px 0 6px; }
    input{ width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid var(--border); background:#fff; font-size: 14px; outline: none; }
    input:focus{ border-color: rgba(37,99,235,.45); box-shadow: 0 0 0 4px rgba(37,99,235,.10); }
    .row{ display:flex; gap:10px; }
    .row > div{ flex:1; }
    button{ width:100%; margin-top: 12px; padding: 11px 12px; border-radius: 12px; border: none; background: linear-gradient(135deg, var(--accent), #1d4ed8); color:#fff; font-weight: 900; cursor: pointer; letter-spacing: .2px; }
    button:disabled{ opacity:.65; cursor:not-allowed; }
    .hint{ margin-top: 10px; font-size: 12px; color: var(--muted); line-height: 1.35; }
    .status{ margin-top: 10px; font-size: 13px; white-space: pre-wrap; }
    .ok{ color: var(--good); }
    .err{ color: var(--bad); }
    textarea{ width:100%; min-height: 420px; padding: 12px; border-radius: 16px; border: 1px solid var(--border); background: #fff; color: #111; font-family: var(--mono); font-size: 13px; line-height: 1.4; resize: vertical; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="name">QuantumMail</div>
        <div class="sub">Decrypt with org credentials • Access is logged</div>
      </div>
      <div class="badge">Message ID: <code id="msgId">-</code></div>
    </div>

    <div class="grid">
      <div class="card">
        <div class="hint">
          Enter your org credentials. This decrypt attempt will be recorded.
          Requires the <b>QuantumMail extension</b> installed in this browser.
        </div>

        <label>Server</label>
        <input id="serverBase" placeholder="(auto)" />

        <div class="row">
          <div>
            <label>Org ID</label>
            <input id="orgId" value="org_demo" placeholder="org_demo" />
          </div>
          <div>
            <label>Username</label>
            <input id="username" placeholder="mihir" autocomplete="username" />
          </div>
        </div>

        <label>Password</label>
        <input id="password" type="password" placeholder="••••••••" autocomplete="current-password" />

        <button id="btnDecrypt">Decrypt</button>

        <div id="ok" class="status ok"></div>
        <div id="err" class="status err"></div>

        <div class="hint">Tip: press Enter on password to decrypt.</div>
      </div>

      <div class="card">
        <div class="hint" style="margin-top:0;">Decrypted plaintext</div>
        <textarea id="out" readonly placeholder="After decrypting, plaintext will appear here..."></textarea>
      </div>
    </div>
  </div>

  <script type="module" src="/portal/decrypt.js"></script>
</body>
</html>
